{"version":3,"sources":["js/wasmHandler.js","js/app.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["combineMultithreadedData","multithreadingWorkers","multithreadingAmount","navigator","hardwareConcurrency","failedToGetThreadCount","undefined","ctx","webworkerLoaded","w","Promise","r","addEventListener","once","setHandlerSetting","name","val","setWorkerSettings","i","postMessage","init","_ctx","loadingCallback","startTime","performance","now","loads","worker","Worker","onmessage","handleMultithreaderReturn","push","combineImageData","combineImageDataIndex","e","data","width","height","startX","imageData","ImageData","putImageData","renderFrame","xCam","yCam","scale","Array","stripWidth","Math","floor","waits","all","canvas","timeSinceStart","version","scaleFactor","frame","fpsArr","keys","autozoom","autozoomSpeed","autozoomInterval","locations","juliaSelection","juliaXEl","document","getElementById","juliaYEl","oninput","updateJuliaVectorFromSliders","setJuliaVector","x","y","value","juliaAnimationState","juliaAnimationFirst","juliaAnimation","maxIterationEl","parseFloat","setMaxIterationFromSlider","introductionEl","innerHTML","onclick","style","display","WasmHandler","locationsEl","generateLocationButtons","loc","el","createElement","textContent","gotoLocation","appendChild","locationInterpolateProgressBarEl","transitionTopScale","transitionSpeed","locationName","find","oXCam","Number","oYCam","oScale","className","t","scaleT","transitionPoint","everZoomedOut","bezierInterpolate","abs","bezierBlend","min","resolve","setTimeout","transitionSpeedEl","console","log","a","b","bezierT","scaleCanvas","window","innerWidth","innerHeight","loadingEl","getContext","multithreadingInitLoadTime","onresize","oncontextmenu","preventDefault","generateKeyName","ctrlKey","shiftKey","key","toLowerCase","onkeydown","onkeyup","dragging","lastDragX","lastDragY","mousePanAmount","mouseDownHandler","which","clientX","clientY","deltaY","setInterval","wheelHandler","clearInterval","mouseMoveHandler","mouseInMandelBeforeX","scaleX","mouseInMandelBeforeY","scaleY","mouseUpHandler","zoom","onmousedown","onmousemove","onmouseup","onwheel","lastUpdateTime","panAmount","scalePanAmount","settingsEl","locationsContainerEl","introIterationAnimation","settingsShowing","update","timeNow","deltaTime","round","length","shift","newValue","parseInt","ceil","drawDebug","requestAnimationFrame","debugEl","resScaleEl","autozoomSpeedEl","linesBetweenEl","checked","borderTracingEl","combineDataEl","arrAverage","arr","reduce","fps","startLoadTime","toFixed","toPrecision","memory","usedJSHeapSize","totalJSHeapSize","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"app.c3f9f951.js","sourceRoot":"../src","sourcesContent":["export let combineMultithreadedData = true;\n\nlet multithreadingWorkers = [];\nexport let multithreadingAmount = navigator.hardwareConcurrency || 4; // Use 4 if can't get CPU core / thread count\nexport let failedToGetThreadCount = navigator.hardwareConcurrency === undefined;\n\nlet ctx;\n\n/*let linesBetweenColumns = false;\nexport function setLinesBetweenColumns(val) { // Allowing setting it externally\n  linesBetweenColumns = val;\n}*/\n\nconst webworkerLoaded = w => new Promise(r => w.addEventListener(\"message\", r, { once: true }));\n\nexport async function setHandlerSetting(name, val) {\n  switch (name) {\n    case 'combineMultithreadedData':\n      combineMultithreadedData = val;\n      break;\n  }\n}\n\nexport async function setWorkerSettings(name, val) {\n  for (let i = 0; i < multithreadingAmount; i++) {\n    multithreadingWorkers[i].postMessage([name, val]);\n  }\n}\n\nexport async function init(_ctx, loadingCallback = () => {}) {\n  loadingCallback('Loading multithreading workers');\n\n  let startTime = performance.now();\n\n  ctx = _ctx;\n\n  let loads = [];\n  for (let i = 0; i < multithreadingAmount; i++) {\n    loadingCallback(`Spawning worker ${i + 1}`);\n\n    let worker = new Worker('wasmMultithread.js');\n\n    worker.onmessage = handleMultithreaderReturn;\n\n    multithreadingWorkers.push(worker);\n    loads.push(webworkerLoaded(worker));\n  }\n\n  for (let i = 0; i < multithreadingAmount; i++) {\n    loadingCallback(`Waiting for worker ${i + 1} to load`);\n    await loads[i];\n  }\n\n  loadingCallback('Loaded all multithreading workers');\n\n  return performance.now() - startTime;\n\n  //await Promise.all(loads);\n\n  //console.log(`${(performance.now() - startTime).toFixed(2)}ms`);\n\n  //await (new Promise(resolve => setTimeout(resolve, 1000)));\n}\n\nlet combineImageData;\nlet combineImageDataIndex;\nfunction handleMultithreaderReturn(e) {\n  if (e.data === 'loaded') return;\n\n  let [i, width, height, data] = e.data;\n\n  let startX = (i * width);\n\n  let imageData = new ImageData(data, width, height);\n\n  if (combineMultithreadedData) {\n    combineImageData[combineImageDataIndex] = [imageData, startX];\n    combineImageDataIndex++;\n\n    if (combineImageDataIndex === multithreadingAmount) {\n      for (let i = 0; i < multithreadingAmount; i++) {\n        ctx.putImageData(combineImageData[i][0], combineImageData[i][1], 0);\n      }\n    }\n\n    return;\n  }\n\n  ctx.putImageData(imageData, startX, 0);\n}\n\nexport async function renderFrame(width, height, xCam, yCam, scale) {\n  combineImageData = Array(multithreadingAmount);\n  combineImageDataIndex = 0;\n\n  let stripWidth = Math.floor(width / multithreadingAmount);\n\n  //let stripCurrent = 0;\n  let waits = [];\n  for (let i = 0; i < multithreadingAmount; i++) {\n    multithreadingWorkers[i].postMessage([i, stripWidth, width, height, xCam, yCam, scale]);\n\n    //stripCurrent += stripWidth;\n\n    waits.push(webworkerLoaded(multithreadingWorkers[i]));\n  }\n\n  await Promise.all(waits);\n\n  //module.render_frame(ctx, width, height, xCam, yCam, scale);\n}","import * as WasmHandler from './wasmHandler';\n\n(async function () { let canvas, ctx;\nconst timeSinceStart = performance.now();\n\nconst version = 'v3.0.0';\n\nlet scaleFactor = 2;\n\nlet width = 0;\nlet height = 0;\n\nlet frame = 0;\nlet fpsArr = new Array(10);\n\nlet xCam = 0;\nlet yCam = 0;\n\nlet scale = 1.2;\n\nlet keys = [];\n\nlet autozoom = false;\nlet autozoomSpeed = 1;\nlet autozoomInterval;\n\nlet locations = [ // TODO: Require adding +0.5 to all X due to xCam shift in Rust instead of in JS\n  {\n    name: 'Overview',\n    xCam: 0,\n    yCam: 0,\n    scale: 1.2\n  },\n  {\n    name: 'Left Mandelbrots',\n    xCam: -1.16,\n    yCam: 0,\n    scale: 0.20\n  },\n  {\n    name: 'Main Left Mandelbrot',\n    xCam: -1.26,\n    yCam: 0,\n    scale: 0.03\n  },\n  {\n    name: 'A Right Mandelbrot',\n    xCam: 0.9322,\n    yCam: 0.2278,\n    scale: 0.003\n  },\n  {\n    name: 'A Top Mandelbrot',\n    xCam: 0.339195,\n    yCam: -1.0338,\n    scale: 0.01203\n  },\n  {\n    name: 'Main Left Left Left Mandelbrot',\n    xCam: -1.2877647,\n    yCam: 0.00000030719355,\n    scale: 0.0000059845\n  }\n];\n\nlet juliaSelection = 0;\n\nconst juliaXEl = document.getElementById('juliaX');\nconst juliaYEl = document.getElementById('juliaY');\n\njuliaXEl.oninput = updateJuliaVectorFromSliders;\n\njuliaYEl.oninput = updateJuliaVectorFromSliders;\n\nfunction setJuliaVector() {\n  let x = 0;\n  let y = 0;\n\n  switch (juliaSelection) {\n    case 0:\n      //x = 0;\n      //y = 0;\n      break;\n    case 1:\n      x = -0.4;\n      y = 0.6;\n      break;\n    case 2:\n      x = 0.285;\n      // y = 0;\n      break;\n    case 3:\n      x = 0.285;\n      y = 0.01;\n      break;\n    case 4:\n      x = 0.45;\n      y = 0.1428;\n      break;\n    case 5:\n      x = -0.70176;\n      y = -0.3842;\n      break;\n    case 6:\n      x = -0.835;\n      y = -0.2321;\n      break;\n    case 7:\n      x = -0.8;\n      y = 0.156;\n      break;\n    case 8:\n      x = -0.7269;\n      y = 0.1889;\n      break;\n    case 9:\n    default:\n      // x = 0;\n      y = -0.8;\n      break;\n  }\n\n  juliaXEl.value = x;\n  juliaYEl.value = y;\n\n  updateJuliaVectorFromSliders();\n}\n\nlet juliaAnimationState = true;\nlet juliaAnimationFirst = true;\n\nfunction juliaAnimation() {\n  if (juliaAnimationFirst) {\n    maxIterationEl.value = 10;\n  }\n\n  if (juliaAnimationState) {\n    juliaXEl.value = parseFloat(juliaXEl.value) - 0.04;\n    if (juliaXEl.value < -1.9) juliaAnimationState = false;\n  } else {\n    juliaXEl.value = parseFloat(juliaXEl.value) + 0.04;\n    if (juliaXEl.value > -0.05) juliaAnimationState = true;\n  }\n\n  setMaxIterationFromSlider();\n\n  updateJuliaVectorFromSliders();\n\n  //requestAnimationFrame(juliaAnimation);\n\n  if (juliaXEl.value < 0.6) {\n    //juliaXEl.value = juliaXEl.value + 0.01;\n  }\n}\n\nconst introductionEl = document.getElementById('introduction');\n\nintroductionEl.innerHTML = `Welcome to MandelWeb!\n\nClicking this closes this introduction panel, however if you have never used this before it is recommended you read below.\n\nKeyboard Controls:\n<kbd>Ctrl</kbd> + <kbd>+</kbd> or <kbd>Z</kbd>: Zoom In\n<kbd>Ctrl</kbd> + <kbd>-</kbd> or <kbd>X</kbd>: Zoom Out\n\n<kbd>W</kbd> or <kbd>🠩</kbd>: Move / Pan Up\n<kbd>A</kbd> or <kbd>🠨</kbd>: Move / Pan Left\n<kbd>S</kbd> or <kbd>🠫</kbd>: Move / Pan Down\n<kbd>D</kbd> or <kbd>🠪</kbd>: Move / Pan Right\n\n<kbd>H</kbd>: Hide Settings Panel (top left)\n<kbd>Shift</kbd> + <kbd>H</kbd>: Hide Locations (top right)`; // Parcel compacts / removes spacing of text\n\nintroductionEl.onclick = () => {\n  introductionEl.style.display = 'none';\n};\n\nfunction updateJuliaVectorFromSliders() {\n  WasmHandler.setWorkerSettings('juliaVectorX', parseFloat(juliaXEl.value));\n  WasmHandler.setWorkerSettings('juliaVectorY', parseFloat(juliaYEl.value));\n}\n\nconst locationsEl = document.getElementById('locations');\nfunction generateLocationButtons() {\n  for (let loc of locations) {\n    let el = document.createElement('button');\n    el.textContent = loc.name;\n    el.onclick = function () { gotoLocation(this.textContent); };\n\n    locationsEl.appendChild(el);\n  }\n}\n\ngenerateLocationButtons();\n\nconst locationInterpolateProgressBarEl = document.getElementById('locationInterpolateProgressBar');\nlet transitionTopScale = 1.19;\nlet transitionSpeed = 1;\n\nasync function gotoLocation(locationName) {\n  let loc = locations.find((x) => x.name === locationName);\n\n  let oXCam = Number(xCam);\n  let oYCam = Number(yCam);\n  let oScale = Number(scale);\n\n  locationInterpolateProgressBarEl.value = 0;\n  locationInterpolateProgressBarEl.className = 'show';\n\n  let t = 0;\n  let scaleT = 0;\n\n  let transitionPoint = [-1, 0];\n  let everZoomedOut = false;\n  while (t < 1 || scaleT < 1) {/// || (xCam !== loc.xCam && yCam !== loc.yCam && scale !== loc.scale)) {\n    if (t < 1) {\n      xCam = bezierInterpolate(oXCam, loc.xCam, t);\n      yCam = bezierInterpolate(oYCam, loc.yCam, t);\n    }\n\n    if ((Math.abs(xCam - loc.xCam) > 0.8 || Math.abs(yCam - loc.yCam) > 0.8) && (transitionTopScale > loc.scale && transitionTopScale > scale && transitionTopScale > oScale)) {\n      everZoomedOut = true;\n      if (transitionPoint[0] !== 1) {\n        transitionPoint = [1, scale];\n        scaleT = 0;\n      }\n\n      scale = bezierInterpolate(transitionPoint[1], transitionTopScale, scaleT);\n    } else {\n      if (transitionPoint[0] !== 0) {\n        transitionPoint = [0, scale];\n        scaleT = 0;\n      }\n\n      scale = bezierInterpolate(transitionPoint[1], loc.scale, scaleT);\n    }\n\n    t += 0.005;\n    scaleT += everZoomedOut ? 0.007 : 0.005;\n    if (scaleT > 1) scaleT = 1;\n    if (t > 1) t = 1;\n\n    locationInterpolateProgressBarEl.value = bezierBlend(Math.min(t, 1));\n\n    await (new Promise(resolve => setTimeout(resolve, 10 / transitionSpeed)));\n  }\n\n  locationInterpolateProgressBarEl.className = '';\n\n  //gotoLocationInterval = setInterval(() => { stepToLocation(loc); }, 10);\n}\n\nlet transitionSpeedEl = document.getElementById('transitionSpeed');\n\ntransitionSpeedEl.oninput = () => {\n  transitionSpeed = parseFloat(transitionSpeedEl.value);\n  console.log(transitionSpeed);\n};\n\nfunction bezierInterpolate(a, b, t) {\n  let bezierT = bezierBlend(t);\n\n  return (1 - bezierT) * a + bezierT * b;\n}\n\nfunction bezierBlend(t) {\n  return t * t * (3 - 2 * t);\n}\n\nfunction scaleCanvas() {\n  width = Math.floor(window.innerWidth / scaleFactor);\n  height = Math.floor(window.innerHeight / scaleFactor);\n\n  canvas.width = width;\n  canvas.height = height;\n\n  canvas.style.width = `${window.innerWidth}px`;\n  canvas.style.height = `${window.innerHeight}px`;\n}\n\nlet loadingEl = document.getElementById('loading');\n\ncanvas = document.getElementById('canvas');\nctx = canvas.getContext('2d');\n\nconst multithreadingInitLoadTime = await WasmHandler.init(ctx, (x) => {\n  loadingEl.textContent = x;\n\n  if (x === 'Loaded all multithreading workers') {\n    loadingEl.textContent = x;\n  }\n});\n\nscaleCanvas();\nwindow.onresize = scaleCanvas;\n\ndocument.oncontextmenu = function(e) {\n  e.preventDefault();\n  return false;\n};\n\nfunction generateKeyName(e) {\n  return (e.ctrlKey ? 'ctrl_' : '') + (e.shiftKey ? 'shift_' : '') + e.key.toLowerCase();\n}\n  \ndocument.onkeydown = function(e) {\n  let name = generateKeyName(e);\n\n  if (keys[name] !== 'override') keys[name] = true;\n\n  if (name === 'ctrl_=' || name === 'ctrl_-') {\n    e.preventDefault();\n  }\n};\n\ndocument.onkeyup = function(e) {\n  keys[generateKeyName(e)] = false;\n};\n\nlet dragging = false;\nlet lastDragX = 0;\nlet lastDragY = 0;\n\nfunction mousePanAmount() {\n  return 0.0025 * scale;\n}\n\nfunction mouseDownHandler(e) {\n  if (e.which === 3) { // Right click - auto zoom\n    if (autozoom === false) {\n      autozoom = {clientX: e.clientX, clientY: e.clientY, deltaY: -autozoomSpeed};\n      autozoomInterval = setInterval(() => { wheelHandler(autozoom); }, 10);\n    } else {\n      clearInterval(autozoomInterval);\n      autozoom = false;\n    }\n\n    return;\n  }\n\n  dragging = true;\n\n  lastDragX = e.clientX;\n  lastDragY = e.clientY;\n\n  //WasmHandler.setHandlerSetting('combineMultithreadedData', true);\n}\n\nfunction mouseMoveHandler(e) {\n  if (!dragging) return;\n\n  //let diffX = x - lastDragX;\n  //let diffY = y - lastDragY;\n\n  let mouseInMandelBeforeX = scaleX(e.clientX / scaleFactor) - xCam;\n  let mouseInMandelBeforeY = scaleY(e.clientY / scaleFactor) - yCam;\n\n  if (lastDragX === 0 && lastDragY === 0) {\n    lastDragX = mouseInMandelBeforeX;\n    lastDragY = mouseInMandelBeforeY;\n  }\n\n  console.log(mouseInMandelBeforeX, lastDragX);\n  console.log(mouseInMandelBeforeY, lastDragY);\n\n  xCam -= mouseInMandelBeforeX - lastDragX; // * mousePanAmount();\n  yCam -= mouseInMandelBeforeY - lastDragY; // * mousePanAmount();\n\n  lastDragX = mouseInMandelBeforeX;\n  lastDragY = mouseInMandelBeforeY;\n}\n\nfunction mouseUpHandler(e) {\n  dragging = false;\n\n  //WasmHandler.setHandlerSetting('combineMultithreadedData', false);\n}\n\nfunction scaleX(x) {\n  return ((x / (width / 3.5)) - 1.75) * scale + xCam;\n}\n\nfunction scaleY(y) {\n  return (((y / (height / 2.0)) - 1.0)) * scale + yCam;\n}\n\nfunction wheelHandler(e) {\n  let zoom = (e.deltaY * 0.001);\n\n  //xCam -= ((scaleX(e.clientX / scaleFactor) * zoom) - xCam) / scaleFactor;\n\n  let mouseInMandelBeforeX = scaleX(e.clientX / scaleFactor) - xCam;\n  let mouseInMandelBeforeY = scaleY(e.clientY / scaleFactor) - yCam;\n\n  //console.log(mouseInMandelBeforeX);\n\n  scale *= 1 + zoom;\n\n  xCam -= (scaleX(e.clientX / scaleFactor) - xCam) - mouseInMandelBeforeX;\n\n  yCam -= (scaleY(e.clientY / scaleFactor) - yCam) - mouseInMandelBeforeY;\n\n  //let diffX = (scaleX(e.clientX / scaleFactor) - xCam) + mouseInMandelBeforeX;\n  //console.log(diffX)\n\n  //xCam += diffX;\n\n  //xCam -= scaleX(e.clientX) * zoom / scaleFactor;\n\n  //xCam = xCam - scaleX(e.clientX / window.innerWidth * (sWidthAfter - sWidthBefore));\n  //yCam = yCam - scaleY(e.clientY / window.innerHeight * (sHeightAfter - sHeightBefore));\n\n  if (e.preventDefault) e.preventDefault();\n}\n\ncanvas.onmousedown = mouseDownHandler;\ncanvas.onmousemove = mouseMoveHandler;\ncanvas.onmouseup = mouseUpHandler;\n\ncanvas.onwheel = wheelHandler;\n\nlet lastUpdateTime = performance.now();\n\nlet panAmount = 0.02;\n\nfunction scalePanAmount() {\n  return panAmount * scale;\n}\n\nlet settingsEl = document.getElementById('settings');\nlet locationsContainerEl = document.getElementById('locationsContainer');\n\nlet introIterationAnimation = true;\n\nlet settingsShowing = true;\n\nasync function update() {\n  let timeNow = performance.now();\n  let deltaTime = (timeNow - lastUpdateTime) / 1000;\n  lastUpdateTime = timeNow;\n\n  //juliaAnimation();\n\n  fpsArr.push(Math.round(1 / deltaTime));\n  if (fpsArr.length > 10) fpsArr.shift();\n\n  if (introIterationAnimation) {\n    let newValue = parseInt(maxIterationEl.value);\n    maxIterationEl.value = Math.ceil(newValue * 1.15); // > 100 ? newValue + 7 : newValue;\n\n    if (newValue > 500) { // || Object.values(keys).some((x) => x)) { // If maxIteration reaches 500 or any keys pressed\n      maxIterationEl.value = 500;\n      introIterationAnimation = false;\n    }\n\n    setMaxIterationFromSlider();\n  }\n\n  if (keys['w'] || keys['arrowup']) {\n    yCam -= scalePanAmount();\n  }\n\n  if (keys['s'] || keys['arrowdown']) {\n    yCam += scalePanAmount();\n  }\n\n  if (keys['a'] || keys['arrowleft']) {\n    xCam -= scalePanAmount();\n  }\n\n  if (keys['d'] || keys['arrowright']) {\n    xCam += scalePanAmount();\n  }\n\n  if (keys['z'] || keys['ctrl_=']) {\n    scale *= 0.99;\n  }\n\n  if (keys['x'] || keys['ctrl_-']) {\n    scale *= 1.01;\n  }\n\n  if (keys['0'] === true) {\n    gotoLocation(locations[0].name);\n    keys['0'] = 'override';\n  }\n\n  if (keys[']'] === true) {\n    juliaSelection++;\n    if (juliaSelection > 9) juliaSelection = 0;\n    setJuliaVector();\n\n    keys[']'] = 'override';\n  }\n\n  if (keys['h'] === true) {\n    settingsShowing = !settingsShowing;\n\n    settingsEl.style.display = settingsShowing ? 'block' : 'none';\n\n    keys['h'] = 'override';\n  }\n\n  if (keys['shift_h'] === true) {\n    locationsContainerEl.style.display = locationsContainerEl.style.display === 'block' ? 'none' : 'block';\n\n    keys['shift_h'] = 'override';\n  }\n\n  await WasmHandler.renderFrame(width, height, xCam, yCam, scale);\n\n  frame++;\n\n  if (settingsShowing) drawDebug();\n\n  requestAnimationFrame(update);\n}\n\nlet debugEl = document.getElementById('debug');\n\nlet resScaleEl = document.getElementById('resScale');\n\nresScaleEl.oninput = () => {\n  scaleFactor = resScaleEl.value;\n\n  scaleCanvas();\n};\n\nlet maxIterationEl = document.getElementById('maxIteration');\n\nfunction setMaxIterationFromSlider() {\n  WasmHandler.setWorkerSettings('maxIteration', maxIterationEl.value);\n  WasmHandler.setWorkerSettings('maxIterationColorScale', 255 / maxIterationEl.value);\n}\n\nmaxIterationEl.oninput = setMaxIterationFromSlider;\n\nlet autozoomSpeedEl = document.getElementById('autozoomSpeed');\n\nautozoomSpeedEl.oninput = () => {\n  autozoomSpeed = autozoomSpeedEl.value;\n  if (autozoom !== false) autozoom.deltaY = -autozoomSpeed;\n}\n\nlet linesBetweenEl = document.getElementById('linesBetween');\n\nlinesBetweenEl.oninput = () => {\n  WasmHandler.setWorkerSettings('linesBetweenMultithreadColumns', linesBetweenEl.checked);\n};\n\nlet borderTracingEl = document.getElementById('borderTracing');\n\nborderTracingEl.oninput = () => {\n  WasmHandler.setWorkerSettings('useBorderTracing', borderTracingEl.checked);\n};\n\nlet combineDataEl = document.getElementById('combineData');\n\ncombineDataEl.oninput = () => {\n  WasmHandler.setHandlerSetting('combineMultithreadedData', combineDataEl.checked);\n};\n\nfunction arrAverage(arr) {\n  return arr.reduce((a, b) => a + b) / arr.length;\n}\n\nasync function drawDebug() {\n  let fps = Math.round(arrAverage(fpsArr));\n\n  debugEl.textContent = `${version}\n\nLoad Time - ${startLoadTime.toFixed(2)}ms:\n  Multithreading: ${multithreadingInitLoadTime.toFixed(2)}ms\n\nFrames: ${frame}, FPS: ${fps}\n\nPosition Information:\n  Camera Position: ${xCam.toPrecision(8)}, ${yCam.toPrecision(8)}\n  Scale: ${scale.toPrecision(8)}\n\nResolution:\n  Scaled: ${width}x${height}\n  Scale Factor: ${scaleFactor}\n  Raw: ${window.innerWidth}x${window.innerHeight}\n\nMultithreading:\n  Workers (Threads): ${WasmHandler.multithreadingAmount} (Assumed: ${WasmHandler.failedToGetThreadCount})\n\nMemory (Heap): ${(window.performance.memory.usedJSHeapSize / 1000000).toFixed(2)}MB used / ${(window.performance.memory.totalJSHeapSize / 1000000).toFixed(2)}MB total`;\n}\n\n/*async function autoGeneratePerformance() {\n  let times = [];\n\n  for (let i = 0; i < 2; i++) {\n    let startTime = performance.now();\n\n    await WasmHandler.renderFrame(width, height, xCam, yCam, scale);\n\n    times.push(performance.now() - startTime);\n  }\n\n  let timeTaken = arrAverage(times);\n\n  loadingEl.textContent = `Auto modifying values for good performance... (${timeTaken.toFixed(0)}ms / ${(1000 / 15).toFixed(0)}ms)`;\n\n  if (timeTaken < 1000 / 15) {\n    let current = Number(maxIterationEl.value);\n    maxIterationEl.value = current + 20; //(parseInt(maxIterationEl.value) - 5).toString();\n    setMaxIterationFromSlider();\n\n    await (new Promise(resolve => setTimeout(resolve, 10)));\n\n    await autoGeneratePerformance();\n  }\n}*/\n\n/*async function increaseMaxIterationAnimation() {\n  await (new Promise(resolve => setTimeout(resolve, 200)));\n\n  if (maxIterationEl.value < 500) {\n    maxIterationEl.value = parseInt(maxIterationEl.value) + 10;\n    console.log(maxIterationEl.value);\n    setMaxIterationFromSlider();\n\n    //await (new Promise(resolve => setTimeout(resolve, 100)));\n\n    await increaseMaxIterationAnimation();\n  }\n}*/\n\nloadingEl.className = 'hide';\n//increaseMaxIterationAnimation();\n\n\n//loadingEl.textContent = 'Auto modifying values for good performance...';\n\n//await autoGeneratePerformance();\n\nconst startLoadTime = performance.now() - timeSinceStart;\n\nupdate();\n})();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}